/*!
* ${copyright}
*/
sap.ui.define(["jquery.sap.global","sap/ovp/library"],function(q){"use strict";var E=sap.ui.core.Control.extend("sap.ovp.ui.EasyScanLayout",{metadata:{library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{}},properties:{useMediaQueries:{group:"Misc",type:"sap.ui.core/boolean",defaultValue:false},debounceTime:{group:"Misc",type:"sap.ui.core/int",defaultValue:150}}},renderer:{render:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellEasyScanLayout");r.writeClasses();r.write(">");var d=c.columnCount;var e=Array.apply(null,new Array(d)).map(function(){return[];});var f=c.getContent();for(var i=0;i<f.length;i++){e[i%d].push(f[i]);}e.forEach(function(h){r.write("<div");r.addClass("easyScanLayoutColumn");r.writeClasses();r.write(">");h.forEach(function(j){r.write("<div");r.addClass("easyScanLayoutItemWrapper");r.writeClasses();r.write(">");r.renderControl(j);r.write("</div>");});r.write("</div>");});r.write("</div>");}}});var g=function(){return[{minWidth:0,styleClass:"columns-blank",columnCount:1},{minWidth:240,styleClass:"columns-block",columnCount:1},{minWidth:352,styleClass:"columns-narrow",columnCount:1},{minWidth:433,styleClass:"columns-wide",columnCount:1},{minWidth:704,styleClass:"columns-narrow",columnCount:2},{minWidth:864,styleClass:"columns-wide",columnCount:2},{minWidth:1024,styleClass:"columns-narrow",columnCount:3},{minWidth:1280,styleClass:"columns-wide",columnCount:3},{minWidth:1440,styleClass:"columns-narrow",columnCount:4},{minWidth:1920,styleClass:"columns-wide",columnCount:4},{minWidth:2560,styleClass:"columns-narrow",columnCount:5},{minWidth:3008,styleClass:"columns-wide",columnCount:5},{minWidth:3600,styleClass:"columns-narrow",columnCount:4},{minWidth:3840,styleClass:"columns-wide",columnCount:4},{minWidth:5120,styleClass:"columns-wide",columnCount:5},{minWidth:6016,styleClass:"columns-wide",columnCount:5}];};E.prototype.init=function(){this.columnResolutionList=g();this.columnCount=this.columnResolutionList[0].columnCount;this.columnStyle="";this.updateColumnClass(this.columnResolutionList[0].styleClass);if(this.getUseMediaQueries()){this.mediaQueryList=this.initMediaListeners(this.columnResolutionList);}else{this.resizeHandlerId=this.initResizeHandler(this.columnResolutionList);}};var m;var a=function(c,d,e){var f=function(h,i){this.updateColumnClass(i);this.refreshColumnCount(h,this.getContent());};if(e.matches){window.clearTimeout(m);m=window.setTimeout(f.bind(this,c,d),this.getDebounceTime());}};var b=function(c,t){var d=c.minWidth;var e=t&&t.minWidth;return"(min-width: "+d+"px)"+(e?" and (max-width: "+(e-1)+"px)":"");};E.prototype.initMediaListeners=function(c){var d=[];for(var i=0;i<c.length;i++){var e=b(c[i],c[i+1]);var f=window.matchMedia(e);var h=a.bind(this,c[i].columnCount,c[i].styleClass);f.addListener(h);f.bindedListener=h;h(f);d.push(f);}return d;};E.prototype.initResizeHandler=function(c){var r;var d=this.getDebounceTime();var e=function(){window.clearTimeout(r);r=window.setTimeout(this.oControl.resizeHandler.bind(this,c),d);};return sap.ui.core.ResizeHandler.register(this,e);};E.prototype.resizeHandler=function(c){var w=this.iWidth;var C=this.oControl;var r;for(var i=0;i<c.length;i++){if(!c[i+1]){r=c[i];break;}if(c[i].minWidth<=w&&c[i+1].minWidth>w){r=c[i];break;}}C.refreshColumnCount(r.columnCount,C.getContent());C.updateColumnClass(r.styleClass);};E.prototype.refreshColumnCount=function(c,d){if(this.columnCount===c){return;}this.columnCount=c;var e=q();for(var i=0;i<c;i++){e=e.add("<div class='easyScanLayoutColumn'/>");}for(var j=0;j<d.length;j++){e.get(j%c).appendChild(d[j].getDomRef().parentNode);}this.$().empty().append(e);};E.prototype.updateColumnClass=function(c){if(this.columnStyle===c){return;}this.removeStyleClass(this.columnStyle);this.addStyleClass(c);this.columnStyle=c;};E.prototype.onAfterRendering=function(){this.fireAfterRendering();};E.prototype.exit=function(){if(this.mediaQueryList){this.mediaQueryList.forEach(function(c){c.removeListener(c.bindedListener);});delete this.mediaQueryList;}if(this.resizeHandlerId){sap.ui.core.ResizeHandler.deregister(this.resizeHandlerId);}};return E;},true);
