(function(){"use strict";jQuery.sap.require("sap.ovp.ui.ObjectStream");sap.ui.controller("sap.ovp.cards.stack.Stack",{onInit:function(){var v=this.getView().byId("stackContent");v.addEventDelegate({onclick:this.openStack.bind(this)});},onExit:function(){this.oObjectStream.destroy();},onAfterRendering:function(){var v=this.getView();var m=v.getModel();var c=v.getModel("ovpCardProperties");var e=c.getProperty("/entitySet");var M=m.getMetaModel();var E=M.getODataEntitySet(e);var o=M.getODataEntityType(E.entityType);var i=20;this.oObjectStream=new sap.ovp.ui.ObjectStream({title:c.getObject("/category"),content:{path:"/"+e,length:i,factory:function(s,C){var b=sap.ui.component({name:"sap.ovp.cards.quickview",componentData:{model:m,settings:{category:o.name,entitySet:e}}});var d=new sap.ui.core.ComponentContainer({component:b});d.setBindingContext=function(C){b.setBindingContext(C);};return d;}}});var I=this.getEntityIntents();if(I.length>0){var a=I[0].label;var p=this._createPlaceHolder(a);var t=this;p.addEventDelegate({onclick:function(){t.doIntentBasedNavigation(null);}});this.oObjectStream.setPlaceHolder(p);}this.oObjectStream.setModel(m);var l=this.oObjectStream.getBinding("content");l.attachDataReceived(function(){var n=l.getCurrentContexts().length;v.byId("stackSize").setText(n);},this);},_createPlaceHolder:function(a){var i=new sap.ui.core.Icon({src:"sap-icon://offsite-work",layoutData:new sap.m.FlexItemData({growFactor:1,alignSelf:sap.m.FlexAlignSelf.Center})});i.addStyleClass("sapOvpStackPlaceHolderIcon");var l=new sap.m.Label({text:a});var s=sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("ForMoreContentAppName",[a]);var t=new sap.m.Text({text:s});l.addStyleClass("sapOvpStackPlaceHolderAppName");t.addStyleClass("sapOvpStackPlaceHolderTextLine");var d=new sap.m.VBox({items:[l,t]});d.addStyleClass("sapOvpStackPlaceHolderLabelsContainer");var v=new sap.m.VBox({items:[i,d]});v.addStyleClass("sapOvpStackPlaceHolder");return v;},openStack:function(){var l=this.oObjectStream.getBinding("content");if(l.getCurrentContexts().length>0){var c=this.getView().$().width();this.oObjectStream.open(c);}}});})();
