/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2015 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','./library','sap/ui/core/Control','sap/m/Toolbar','sap/m/ToolbarDesign','sap/m/ToolbarLayoutData','sap/m/ToolbarSpacer','sap/m/Label','sap/ui/fl/registry/Settings','sap/ui/fl/Utils'],function(q,l,C,T,a,b,c,L,F,U){"use strict";var d=C.extend("sap.ui.rta.ToolsMenu",{metadata:{library:"sap.ui.rta",aggregations:{"toolbars":{type:"sap.m.Toolbar",multiple:true,singularName:"toolbar"}},events:{"close":{},"restore":{},"transport":{}}}});d.prototype.init=function(){var A=null;var o=null;var B=null;var t=null;var e=null;var r=null;this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");if(!this._oToolBarTop){t=this._oRb.getText("TOOLBAR_TITLE");A=new L({text:t,layoutData:new b({shrinkable:false})});t=null;o=new L({text:t,layoutData:new b({shrinkable:false})});t=this._oRb.getText("BTN_RESTORE");this._oButtonRestore=new sap.m.Button({type:"Transparent",text:t,visible:false,tooltip:t,layoutData:new b({shrinkable:false})});this._oButtonRestore.data("Action","RESTORE",true);this._oButtonRestore.attachEvent('press',this._onRestore,this);t=this._oRb.getText("BTN_EXIT");B=new sap.m.Button({type:"Transparent",text:t,tooltip:t,layoutData:new b({shrinkable:false})});B.data("Action","EXIT",true);B.attachEvent('press',this.close,this);t=this._oRb.getText("BTN_TRANSPORT");this._oButtonTransport=new sap.m.Button({type:"Transparent",text:"Transport",visible:false,tooltip:t,layoutData:new b({shrinkable:false})});this._oButtonTransport.data("Action","TRANSPORT",true);this._oButtonTransport.attachEvent('press',this._onTransport,this);e=new c();r=new c();this._oToolBarTop=new T({active:true,content:[A,e,o,r,this._oButtonRestore,this._oButtonTransport,B]});this._oToolBarTop.addStyleClass("sapUiRTAToolBarTop");this.addToolbar(this._oToolBarTop);}if(!this._oToolBarBottom){this._oToolBarBottom=new T({active:true,content:[]});this._oToolBarBottom.addStyleClass("sapUiRTAToolBarBottom");this.addToolbar(this._oToolBarBottom);}this.placeAt(sap.ui.getCore().getStaticAreaRef());};d.prototype._onTransport=function(){this.fireTransport();};d.prototype._checkTransportAvailable=function(){var t=this;return F.getInstance(U.getComponentClassName(this._oRootControl)).then(function(s){if(!s.isProductiveSystem()&&!s.hasMergeErrorOccured()){t._oButtonTransport.setVisible(true);t._oButtonRestore.setVisible(true);}});};d.prototype.show=function(){this._oToolBarTop.addStyleClass("sapUiRTAToolBarTopVisible");this._oToolBarTop.removeStyleClass("sapUiRTAToolBarTopInvisible");this._oToolBarBottom.addStyleClass("sapUiRTAToolBarBottomVisible");this._oToolBarBottom.removeStyleClass("sapUiRTAToolBarBottomInvisible");};d.prototype.hide=function(){this._oToolBarTop.addStyleClass("sapUiRTAToolBarTopInvisible");this._oToolBarBottom.addStyleClass("sapUiRTAToolBarBottomInvisible");};d.prototype._onRestore=function(){this.fireRestore();};d.prototype.close=function(){var t=this;var o=document.getElementsByClassName("sapUiRTAToolBarBottom")[0];var A=function(){t.fireClose();};o.addEventListener("webkitAnimationEnd",A);o.addEventListener("animationend",A);o.addEventListener("oanimationend",A);this.hide();};d.prototype.setTitle=function(t){var o=this._oToolBarTop.getContent()[2];o.setText(t);};d.prototype.setRootControl=function(o){this._oRootControl=o;};d.prototype.adaptButtonsVisibility=function(){this._checkTransportAvailable();};return d;},true);
